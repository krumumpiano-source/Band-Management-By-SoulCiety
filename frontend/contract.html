<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á ‚Äî Band Management By SoulCiety</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&family=Sarabun:wght@400;500;600&display=swap" rel="stylesheet">
  <?!= include('css_theme') ?>
  <?!= include('css_nav') ?>
  <?!= include('css_browser-compat') ?>
  <style>
    @media print{#mainNav,.btn,.modal-backdrop{display:none!important}.print-area{max-width:780px;margin:auto;font-family:'Sarabun',sans-serif}}
    .contract-preview{background:#fff;padding:40px;border-radius:var(--radius-lg);box-shadow:var(--shadow-md);line-height:2;font-size:15px}
    .contract-preview h2{text-align:center;font-size:1.4rem;border-bottom:2px solid #000;padding-bottom:12px;margin-bottom:20px}
    .contract-party{margin-bottom:16px}
    .contract-sign{display:grid;grid-template-columns:1fr 1fr;gap:40px;margin-top:60px}
    .sign-block{text-align:center;border-top:1px solid #000;padding-top:8px}
    .preview-vars{background:var(--premium-off-white);border-radius:var(--radius-lg);padding:var(--spacing-xl);margin-bottom:var(--spacing-xl)}
    .prev-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:var(--spacing-md)}
  </style>
</head>
<body>
  <div id="mainNav"></div>
  <div id="toast"></div>
  <main>
    <div class="container">
      <div class="page-header">
        <h1 class="page-title" data-i18n="nav_contract">‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á</h1>
        <div style="display:flex;gap:var(--spacing-sm)">
          <button class="btn btn-secondary" onclick="generatePreview()">üëÅ ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
          <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è <span data-i18n="print">‡∏û‡∏¥‡∏°‡∏û‡πå</span></button>
        </div>
      </div>

      <!-- Form -->
      <div class="preview-vars">
        <h3 style="margin:0 0 var(--spacing-md);font-size:var(--text-base)">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ç‡∏ç‡∏≤</h3>
        <div class="prev-row">
          <div class="form-group"><label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏±‡∏ç‡∏ç‡∏≤</label><input type="date" id="contractDate"></div>
          <div class="form-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á</label><input type="text" id="employerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó"></div>
          <div class="form-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ</label><input type="text" id="bandNameCt"></div>
          <div class="form-group"><label>‡∏ß‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á</label><input type="date" id="eventDate"></div>
        </div>
        <div class="prev-row">
          <div class="form-group"><label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</label><input type="text" id="eventVenue"></div>
          <div class="form-group"><label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°</label><input type="time" id="eventStartTime"></div>
          <div class="form-group"><label>‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏ö</label><input type="time" id="eventEndTime"></div>
          <div class="form-group"><label>‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="totalFee" value="0"></div>
        </div>
        <div class="prev-row">
          <div class="form-group"><label>‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ (‡∏ö‡∏≤‡∏ó)</label><input type="number" id="deposit" value="0"></div>
          <div class="form-group"><label>‡∏ä‡∏≥‡∏£‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</label><input type="text" id="balanceDate" placeholder="‡∏ß‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á/‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á"></div>
          <div class="form-group"><label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏±‡∏î‡∏à‡∏≥</label><input type="text" id="receiverName"></div>
        </div>
        <div class="form-group"><label>‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</label><textarea id="extraTerms" rows="3" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏û‡∏¥‡πÄ‡∏®‡∏© ‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏ß‡∏°/‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á, ‡πÄ‡∏ö‡∏£‡∏Ñ, ‡∏≠‡∏≤‡∏´‡∏≤‡∏£..."></textarea></div>
      </div>

      <!-- Contract Preview -->
      <div class="contract-preview print-area" id="contractDoc">
        <h2>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏à‡πâ‡∏≤‡∏á‡∏ß‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ</h2>
        <div class="contract-party" id="partySection">
          <p>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <strong id="pDate">‚Äî</strong></p>
          <p>‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á <strong id="pEmployer">‚Äî</strong> (‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á)</p>
          <p>‡∏Å‡∏±‡∏ö <strong id="pBand">‚Äî</strong> (‡∏ß‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ)</p>
        </div>
        <p><strong>‡∏Ç‡πâ‡∏≠ 1: ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</strong></p>
        <p>‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á‡∏ï‡∏Å‡∏•‡∏á‡∏à‡πâ‡∏≤‡∏á‡∏ß‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏™‡∏î ‡∏ì <span id="pVenue">‚Äî</span> ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <span id="pEventDate">‚Äî</span> ‡πÄ‡∏ß‡∏•‡∏≤ <span id="pTime">‚Äî</span></p>
        <p><strong>‡∏Ç‡πâ‡∏≠ 2: ‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß</strong></p>
        <p>‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á‡∏ï‡∏Å‡∏•‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô <span id="pFee">‚Äî</span> ‡∏ö‡∏≤‡∏ó ‡πÇ‡∏î‡∏¢‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥ <span id="pDeposit">‚Äî</span> ‡∏ö‡∏≤‡∏ó ‡∏ì ‡∏ß‡∏±‡∏ô‡πÄ‡∏ã‡πá‡∏ô‡∏™‡∏±‡∏ç‡∏ç‡∏≤ ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ <span id="pBalance">‚Äî</span> ‡∏ö‡∏≤‡∏ó ‡∏ä‡∏≥‡∏£‡∏∞<span id="pBalanceDate">‚Äî</span></p>
        <p><strong>‡∏Ç‡πâ‡∏≠ 3: ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</strong></p>
        <p id="pExtraTerms">‚Äî</p>
        <p><strong>‡∏Ç‡πâ‡∏≠ 4: ‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</strong></p>
        <p>‡∏´‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 7 ‡∏ß‡∏±‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ç‡∏≠‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ ‡∏´‡∏≤‡∏Å‡∏ß‡∏á‡∏î‡∏ô‡∏ï‡∏£‡∏µ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏á‡∏≤‡∏ô‡∏à‡∏∞‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</p>
        <div class="contract-sign">
          <div class="sign-block">
            <p>________________________</p>
            <p>(<span id="pSignEmployer">‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á</span>)</p>
            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ________________________</p>
          </div>
          <div class="sign-block">
            <p>________________________</p>
            <p>(<span id="pSignReceiver">‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö</span>)</p>
            <p>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ________________________</p>
          </div>
        </div>
      </div>
    </div>
  </main>
  <?!= include('js_i18n') ?>
  <?!= include('js_app') ?>
  <?!= include('js_nav') ?>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    requireAuth(); renderMainNav('mainNav'); applyTranslations();
    document.getElementById('contractDate').value = new Date().toISOString().substring(0,10);
    var band = localStorage.getItem('bandName') || '';
    document.getElementById('bandNameCt').value = band;
    generatePreview();
  });

  function generatePreview() {
    document.getElementById('pDate').textContent = formatDate(document.getElementById('contractDate').value);
    document.getElementById('pEmployer').textContent = document.getElementById('employerName').value || '‚Äî';
    document.getElementById('pBand').textContent = document.getElementById('bandNameCt').value || '‚Äî';
    document.getElementById('pVenue').textContent = document.getElementById('eventVenue').value || '‚Äî';
    document.getElementById('pEventDate').textContent = formatDate(document.getElementById('eventDate').value) || '‚Äî';
    var st = document.getElementById('eventStartTime').value, et = document.getElementById('eventEndTime').value;
    document.getElementById('pTime').textContent = (st||'?')+' ‚Äì '+(et||'?') + ' ‡∏ô.';
    var fee = parseFloat(document.getElementById('totalFee').value)||0;
    var dep = parseFloat(document.getElementById('deposit').value)||0;
    document.getElementById('pFee').textContent = formatCurrency(fee);
    document.getElementById('pDeposit').textContent = formatCurrency(dep);
    document.getElementById('pBalance').textContent = formatCurrency(fee-dep);
    document.getElementById('pBalanceDate').textContent = document.getElementById('balanceDate').value || '‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á';
    document.getElementById('pExtraTerms').textContent = document.getElementById('extraTerms').value || '‚Äî';
    document.getElementById('pSignEmployer').textContent = document.getElementById('employerName').value || '‡∏ú‡∏π‡πâ‡∏à‡πâ‡∏≤‡∏á';
    document.getElementById('pSignReceiver').textContent = document.getElementById('receiverName').value || '‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏°‡∏≠‡∏ö';
  }

  ['contractDate','employerName','bandNameCt','eventDate','eventVenue','eventStartTime','eventEndTime','totalFee','deposit','balanceDate','receiverName','extraTerms'].forEach(function(id){
    var el = document.getElementById(id);
    if (el) el.addEventListener('input', generatePreview);
    if (el) el.addEventListener('change', generatePreview);
  });
  </script>
</body>
</html>
