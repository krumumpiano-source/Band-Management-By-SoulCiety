/* Navigation — Band Management By SoulCiety
   Hamburger-always design: brand left, controls right, full 2-col dropdown */

/* ===== Main bar ===== */
.main-nav {
  background: #1a202c;
  box-shadow: 0 2px 8px rgba(0,0,0,.35);
  position: sticky;
  top: 0;
  z-index: var(--z-sticky, 100);
  margin-bottom: var(--spacing-lg);
}
.nav-inner {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 var(--spacing-md);
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 56px;
  gap: var(--spacing-md);
}

/* ===== Brand ===== */
.nav-brand { flex-shrink: 0; }
.nav-brand a {
  font-family: var(--font-family-display);
  font-size: var(--text-lg);
  font-weight: 700;
  color: var(--premium-gold);
  text-decoration: none;
  white-space: nowrap;
}
.nav-brand a:hover { color: #ecc94b; }

/* ===== Hamburger — ALWAYS visible ===== */
.nav-hamburger {
  display: flex;
  flex-direction: column;
  gap: 5px;
  background: #2d3748;
  border: 1px solid #4a5568;
  cursor: pointer;
  padding: 8px 11px;
  border-radius: var(--radius-md);
  -webkit-tap-highlight-color: transparent;
  transition: background .15s;
  order: 0;
}
.nav-hamburger:hover { background: #4a5568; }
.nav-hamburger span {
  display: block;
  width: 20px;
  height: 2px;
  background: var(--premium-gold);
  border-radius: 2px;
  transition: transform .25s, opacity .2s;
}
.nav-hamburger.open { background: #4a5568; }
.nav-hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.nav-hamburger.open span:nth-child(2) { opacity: 0; }
.nav-hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* ===== Right controls (lang + user + logout) ===== */
.nav-right {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  flex-shrink: 0;
}
.nav-user-name {
  font-size: var(--text-xs);
  color: #a0aec0;
  white-space: nowrap;
  max-width: 140px;
  overflow: hidden;
  text-overflow: ellipsis;
}
.nav-logout {
  font-size: var(--text-xs);
  color: #fc8181;
  text-decoration: none;
  font-weight: 600;
  white-space: nowrap;
  padding: 4px 10px;
  border-radius: var(--radius-sm);
  border: 1px solid rgba(252,129,129,.5);
  transition: background .15s, color .15s;
}
.nav-logout:hover { background: #fc8181; color: #fff; text-decoration: none; }

/* ===== Dropdown menu panel ===== */
.nav-menu-wrap {
  display: none;
  position: absolute;
  top: 56px;
  left: 0;
  right: 0;
  background: #1a202c;
  border-top: 2px solid var(--premium-gold);
  box-shadow: 0 12px 32px rgba(0,0,0,.55);
  z-index: var(--z-dropdown, 200);
  padding: var(--spacing-lg) var(--spacing-xl);
  flex-direction: column;
  gap: var(--spacing-md);
  max-height: calc(100vh - 64px);
  overflow-y: auto;
}
@media (max-width: 900px) {
  .nav-menu-wrap {
    /* Leave space for bottom tab bar (≈60px) */
    max-height: calc(100vh - 64px - 60px - env(safe-area-inset-bottom, 0px));
    padding: var(--spacing-md);
  }
}
.nav-menu-wrap.open { display: flex; }

/* ===== Menu grid ===== */
.nav-menu {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px 12px;
  list-style: none;
  padding: 0;
  margin: 0;
}
@media (max-width: 700px) {
  .nav-menu { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 420px) {
  .nav-menu { grid-template-columns: 1fr; }
}

.nav-menu li a {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border-radius: var(--radius-md);
  color: #a0aec0;
  text-decoration: none;
  font-size: var(--text-sm);
  font-weight: 500;
  transition: background .15s, color .15s, transform .1s;
  white-space: nowrap;
  min-height: 42px;
  border: 1px solid transparent;
}
.nav-menu li a:hover {
  background: #2d3748;
  color: #fff;
  transform: translateX(2px);
}
.nav-menu li a.active {
  background: linear-gradient(135deg, #2d3748, #3a4a60);
  color: var(--premium-gold);
  font-weight: 600;
  border-color: rgba(203,162,60,.3);
  border-left: 3px solid var(--premium-gold);
}

/* ===== Bottom divider: lang in dropdown ===== */
.nav-menu-bottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-top: var(--spacing-md);
  border-top: 1px solid #2d3748;
  flex-wrap: wrap;
  gap: var(--spacing-sm);
}

/* ===== Lang switcher ===== */
.lang-switcher {
  display: flex;
  gap: 2px;
  background: #2d3748;
  border-radius: var(--radius-sm);
  padding: 3px;
}
.lang-btn {
  padding: 4px 10px;
  font-size: var(--text-xs);
  font-weight: 600;
  border: none;
  border-radius: 4px;
  background: transparent;
  color: #718096;
  cursor: pointer;
  transition: background .15s, color .15s;
  min-height: 28px;
}
.lang-btn:hover { color: #fff; }
.lang-btn.active { background: #4a5568; color: var(--premium-gold); }

/* ===== Backdrop ===== */
.nav-backdrop {
  display: none;
  position: fixed;
  inset: 56px 0 0 0;
  background: rgba(0,0,0,.45);
  z-index: calc(var(--z-dropdown, 200) - 1);
}
/* On mobile, stop before the bottom tab bar */
@media (max-width: 900px) {
  .nav-backdrop {
    bottom: calc(60px + env(safe-area-inset-bottom, 0px));
  }
}
.nav-backdrop.open { display: block; }

/* =============================================
   BOTTOM TAB BAR — mobile / tablet only
   ============================================= */
.bottom-tab-bar {
  display: none;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: #111827;
  border-top: 2px solid #2d3748;
  z-index: var(--z-fixed, 1030);
  padding-bottom: env(safe-area-inset-bottom, 0px);
  grid-template-columns: repeat(5, 1fr);
  box-shadow: 0 -4px 20px rgba(0,0,0,.4);
}

/* Show bottom bar on mobile/tablet, hide on desktop */
@media (max-width: 900px) {
  .bottom-tab-bar { display: grid; }
  /* On mobile — hide logout & username from top bar to save space */
  .nav-logout { display: none; }
  .nav-user-name { display: none; }
}

/* Individual tab button */
.btab {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 7px 4px 6px;
  text-decoration: none;
  color: #718096;
  font-family: var(--font-family-body, 'Sarabun', sans-serif);
  font-weight: 600;
  gap: 2px;
  cursor: pointer;
  background: none;
  border: none;
  border-top: 2px solid transparent;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
  min-height: 54px;
  transition: color .15s, border-color .15s;
  position: relative;
}
.btab:hover { color: #cbd5e0; }
.btab.active {
  color: var(--premium-gold, #f6ad55);
  border-top-color: var(--premium-gold, #f6ad55);
}
.btab-icon {
  font-size: 21px;
  line-height: 1;
  transition: transform .15s;
}
.btab.active .btab-icon { transform: scale(1.12); }
.btab-label {
  font-size: 10px;
  line-height: 1.2;
  text-align: center;
  white-space: nowrap;
}

/* Active badge dot (for "More" tab when current page is not in the 4 main ones) */
.btab-dot {
  position: absolute;
  top: 6px;
  right: calc(50% - 14px);
  width: 7px;
  height: 7px;
  background: #fc8181;
  border-radius: 50%;
  display: none;
}
.btab-dot.show { display: block; }
